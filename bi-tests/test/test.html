<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--基于标准化的boxmodel来统一浏览器 -->
<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset='utf-8'>
    <!-- <script type='text/javascript' src='http://192.168.1.115:8075/WebReport/ReportServer?op=emb&resource=finereport.js&__v__=%E4%B8%8D%E6%98%AF%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC'></script> -->
    <!-- <script type='text/javascript' src='http://192.168.1.115:8075/WebReport/ReportServer?op=emb&resource=third.js&__v__=%E4%B8%8D%E6%98%AF%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC'></script> -->
    <!-- <script type='text/javascript' src='http://192.168.1.115:8075/WebReport/ReportServer?op=emb&resource=base.js&__v__=%E4%B8%8D%E6%98%AF%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC'></script> -->
    <!-- <script type='text/javascript' src='http://192.168.1.115:8075/WebReport/ReportServer?op=emb&resource=export.js&__v__=%E4%B8%8D%E6%98%AF%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC'></script> -->
    <script type='text/javascript' src='../vancharts-all.js'></script>
    <script type='text/javascript' src='../jquery.js'></script>
    <script type='text/javascript' src='../../examples/es6_promise.js'></script>
    <script type='text/javascript' src='../../dist/html2canvas.js'></script>
    <script type='text/javascript' src='../../dist/html2canvas.svg.js'></script>
    <script type='text/javascript' src='../config.js'></script>
    <link rel='stylesheet' href='../test.css' type='text/css'/>
    <link rel="stylesheet" href='../mapCss/leaflet.css' type="text/css">
</head>

<body>

<div class="demo">
    <div class="float">
        <div>
            <button id="btn" style='position: absolute; top: 50px; left: 650px; z-index: 1000;'>html2canvas</button>
            <div id="vessel" style='position: relative; width: 800px; height: 500px'></div>
        </div>
        <div>
            <img id='img_canvas'>
        </div>
        <div id='path_wrapper'>
            <svg id = 'path' width="60" height="60" xmlns="http://www.w3.org/2000/svg">
                <path d="M0,30A30,30 0 1,1 0,-30A30,30 0 1,1 0,30Z" transform="translate(30,30)"
                      style="stroke: rgb(29, 214, 223); stroke-opacity: 0; stroke-width: 0; fill: rgb(45, 192, 206); fill-opacity: 0.7; filter: url(&quot;#vancharts87&quot;);"></path>
                <defs>
                    <filter id="vancharts87" x="-50%" y="-50%" width="200%" height="200%">
                        <feOffset in="SourceGraphic" dx="0" dy="0" result="offOut"></feOffset>
                        <feColorMatrix in="offOut" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                                       result="matrixOut"></feColorMatrix>
                        <feGaussianBlur in="matrixOut" stdDeviation="2" result="blurOut"></feGaussianBlur>
                        <feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend>
                    </filter>
                </defs>
            </svg>
        </div>
        <div>
            <img id='path_canvas'>
        </div>
        <div id='image_wrapper' style="overflow: inherit">
            <img id='wrapper' src='../test.jpg'>
        </div>
        <div>
            <img id='image_canvas'>
        </div>
        <div>
            <textarea id="holder" style="width: 700px; height: 400px; margin-top: 50px;"></textarea>
        </div>
        <div>
            <img id='textarea_canvas' style="margin-top: 50px">
        </div>
        <div>
            <iframe id="container" style='width: 700px; height: 400px; margin-top: 50px;'></iframe>
        </div>
        <div>
            <img id='iframe_canvas' style="margin-top: 50px">
        </div>
    </div>
</div>

<script type="text/javascript">
    var vessel = document.getElementById('vessel');
    var wrapper = VanCharts.init(vessel);
    wrapper.setOptions(barChartOptions);
//    wrapper.setOptions(bubbleMapOptions);
//    wrapper.setOptions(dotMapOptions);
//    wrapper.setOptions(areaMapOptions);

    var textArea = $('#holder');
    var value = '123-zhang-张-AstronautOO8123-zhang-张-AstronautOO8123-zhang-张-AstronautOO8123-zhang-张-AstronautOO8123-zhang-张-AstronautOO8123-zhang-张-AstronautOO8';
    textArea.val(value);

    var container = document.querySelector('#container');

    document.querySelector('#btn').onclick = function () {
        vessel.style.width = '800px';
        vessel.style.height = '500px';
        wrapper.resize();
        renderChart()
    };

    //    container.src = "https://www.baidu.com";

    function renderPath() {
        html2canvas(document.querySelector('#path'), {
            logging: true,
            useCORS: true
        }).then(function (canvas) {
            var imgData = canvas.toDataURL();
            document.getElementById('path_canvas').src = imgData;
        })
    }

    function renderImage() {
        html2canvas(document.querySelector('#image_wrapper'), {
            logging: true,
            useCORS: true
        }).then(function (canvas) {
            var imgData = canvas.toDataURL();
            document.getElementById('image_canvas').src = imgData;
        })
    }

    function renderChart() {

        setTimeout(function () {
            html2canvas(vessel, {
                useCORS: true,
                foreignObjectRendering: false,
                logging: true
            }).then(function (canvas) {
                var imgData = canvas.toDataURL();
                document.getElementById('img_canvas').src = imgData;
            })
        }, 500)
    }

    function renderTextArea() {
        html2canvas(textArea, {
            logging: true,
            type: 'view'
        }).then(function (canvas) {
            var imgData = canvas.toDataURL();
            document.getElementById('textarea_canvas').src = imgData;
        })

    }

    function renderIframe() {

        html2canvas(container, {
            useCORS: true,
            logging: true
        }).then(function (canvas) {
            var imgData = canvas.toDataURL();
            document.getElementById('iframe_canvas').src = imgData;
        })
    }

    window.onload = function () {
//        renderImage();
        renderChart();
        renderPath();
//        renderTextArea();
//        renderIframe();
    };

</script>
</body>

</html>
